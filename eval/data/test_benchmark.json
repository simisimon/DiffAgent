[
  {
    "id": "test_001",
    "name": "Port mismatch between Dockerfile and properties",
    "diff": "diff --git a/Dockerfile b/Dockerfile\nindex 1234567..abcdefg 100644\n--- a/Dockerfile\n+++ b/Dockerfile\n@@ -10,7 +10,7 @@ FROM openjdk:11-jre-slim\n COPY target/app.jar /app.jar\n \n # Expose port\n-EXPOSE 8080\n+EXPOSE 9090\n \n ENTRYPOINT [\"java\", \"-jar\", \"/app.jar\"]\n\ndiff --git a/application.properties b/application.properties\nindex 9876543..fedcba9 100644\n--- a/application.properties\n+++ b/application.properties\n@@ -1,5 +1,5 @@\n # Server configuration\n-server.port=8080\n+server.port=8080\n spring.application.name=myapp\n ",
    "ground_truth": {
      "has_errors": true,
      "errors": [
        {
          "file_path": "Dockerfile",
          "option_name": "EXPOSE",
          "severity": "critical",
          "reason": "Port mismatch: Dockerfile exposes port 9090 but application.properties uses port 8080",
          "category": "inconsistency"
        }
      ]
    }
  },
  {
    "id": "test_002",
    "name": "DEBUG mode enabled",
    "diff": "diff --git a/settings.py b/settings.py\nindex abc1234..def5678 100644\n--- a/settings.py\n+++ b/settings.py\n@@ -5,7 +5,7 @@ import os\n SECRET_KEY = os.getenv('SECRET_KEY')\n \n # Debug mode\n-DEBUG = False\n+DEBUG = True\n \n ALLOWED_HOSTS = ['example.com']\n ",
    "ground_truth": {
      "has_errors": true,
      "errors": [
        {
          "file_path": "settings.py",
          "option_name": "DEBUG",
          "severity": "critical",
          "reason": "DEBUG mode is enabled which can expose sensitive information in production",
          "category": "security"
        }
      ]
    }
  },
  {
    "id": "test_003",
    "name": "Wildcard in ALLOWED_HOSTS",
    "diff": "diff --git a/settings.py b/settings.py\nindex abc1234..def5678 100644\n--- a/settings.py\n+++ b/settings.py\n@@ -8,7 +8,7 @@ DEBUG = False\n SECRET_KEY = os.getenv('SECRET_KEY')\n \n # Allowed hosts\n-ALLOWED_HOSTS = ['example.com', 'www.example.com']\n+ALLOWED_HOSTS = ['*']\n \n DATABASES = {\n     'default': {\n ",
    "ground_truth": {
      "has_errors": true,
      "errors": [
        {
          "file_path": "settings.py",
          "option_name": "ALLOWED_HOSTS",
          "severity": "critical",
          "reason": "Wildcard in ALLOWED_HOSTS allows requests from any domain, creating a security vulnerability",
          "category": "security"
        }
      ]
    }
  },
  {
    "id": "test_004",
    "name": "Valid configuration change - no errors",
    "diff": "diff --git a/config.yaml b/config.yaml\nindex 1111111..2222222 100644\n--- a/config.yaml\n+++ b/config.yaml\n@@ -3,7 +3,7 @@ app:\n   version: \"1.0.0\"\n   \n logging:\n-  level: INFO\n+  level: DEBUG\n   format: json\n ",
    "ground_truth": {
      "has_errors": false,
      "errors": []
    }
  },
  {
    "id": "test_006",
    "name": "Invalid memory limit",
    "diff": "diff --git a/docker-compose.yml b/docker-compose.yml\nindex xxx1111..yyy2222 100644\n--- a/docker-compose.yml\n+++ b/docker-compose.yml\n@@ -5,7 +5,7 @@ services:\n     image: myapp:latest\n     deploy:\n       resources:\n-        limits:\n-          memory: 512M\n+        limits:\n+          memory: 256M\n+        reservations:\n+          memory: 512M\n ",
    "ground_truth": {
      "has_errors": true,
      "errors": [
        {
          "file_path": "docker-compose.yml",
          "option_name": "memory",
          "severity": "critical",
          "reason": "Memory reservation (512M) is higher than memory limit (256M), which is invalid",
          "category": "invalid_value"
        }
      ]
    }
  },
  {
    "id": "test_007",
    "name": "Inconsistent database configuration",
    "diff": "diff --git a/config/database.yml b/config/database.yml\nindex aaa0000..bbb1111 100644\n--- a/config/database.yml\n+++ b/config/database.yml\n@@ -2,7 +2,7 @@ production:\n   adapter: postgresql\n   database: myapp_production\n   host: db.example.com\n-  port: 5432\n+  port: 3306\n   pool: 5\n ",
    "ground_truth": {
      "has_errors": true,
      "errors": [
        {
          "file_path": "config/database.yml",
          "option_name": "port",
          "severity": "critical",
          "reason": "Port 3306 is for MySQL, but adapter is set to postgresql (should use port 5432)",
          "category": "inconsistency"
        }
      ]
    }
  },
  {
    "id": "test_008",
    "name": "Valid security improvement",
    "diff": "diff --git a/settings.py b/settings.py\nindex ccc3333..ddd4444 100644\n--- a/settings.py\n+++ b/settings.py\n@@ -15,7 +15,7 @@ ALLOWED_HOSTS = ['example.com']\n # Security settings\n-SECURE_SSL_REDIRECT = False\n+SECURE_SSL_REDIRECT = True\n SESSION_COOKIE_SECURE = True\n-CSRF_COOKIE_SECURE = False\n+CSRF_COOKIE_SECURE = True\n ",
    "ground_truth": {
      "has_errors": false,
      "errors": []
    }
  },
  {
    "id": "test_009",
    "name": "Missing required environment variable",
    "diff": "diff --git a/Dockerfile b/Dockerfile\nindex eee5555..fff6666 100644\n--- a/Dockerfile\n+++ b/Dockerfile\n@@ -8,7 +8,6 @@ WORKDIR /app\n COPY . .\n \n ENV NODE_ENV=production\n-ENV DATABASE_URL=postgresql://db:5432/myapp\n \n RUN npm install --production\n ",
    "ground_truth": {
      "has_errors": true,
      "errors": [
        {
          "file_path": "Dockerfile",
          "option_name": "DATABASE_URL",
          "severity": "warning",
          "reason": "Removed DATABASE_URL environment variable which may be required by the application",
          "category": "best_practice"
        }
      ]
    }
  },
  {
    "id": "test_010",
    "name": "Timeout value too low",
    "diff": "diff --git a/nginx.conf b/nginx.conf\nindex ggg7777..hhh8888 100644\n--- a/nginx.conf\n+++ b/nginx.conf\n@@ -10,7 +10,7 @@ http {\n     location / {\n         proxy_pass http://backend;\n-        proxy_read_timeout 60s;\n+        proxy_read_timeout 5s;\n         proxy_connect_timeout 10s;\n     }\n ",
    "ground_truth": {
      "has_errors": true,
      "errors": [
        {
          "file_path": "nginx.conf",
          "option_name": "proxy_read_timeout",
          "severity": "warning",
          "reason": "Read timeout of 5s is very low and may cause premature connection terminations",
          "category": "best_practice"
        }
      ]
    }
  },
  {
    "id": "test_011",
    "name": "Connection pool size increase - valid",
    "diff": "diff --git a/application.properties b/application.properties\nindex iii9999..jjj0000 100644\n--- a/application.properties\n+++ b/application.properties\n@@ -5,7 +5,7 @@ spring.datasource.url=jdbc:postgresql://localhost:5432/mydb\n spring.datasource.username=dbuser\n spring.datasource.password=${DB_PASSWORD}\n \n-spring.datasource.hikari.maximum-pool-size=10\n+spring.datasource.hikari.maximum-pool-size=20\n spring.datasource.hikari.minimum-idle=5\n ",
    "ground_truth": {
      "has_errors": false,
      "errors": []
    }
  },
  {
    "id": "test_012",
    "name": "CORS misconfiguration",
    "diff": "diff --git a/config.js b/config.js\nindex kkk1111..lll2222 100644\n--- a/config.js\n+++ b/config.js\n@@ -3,7 +3,7 @@ module.exports = {\n   cors: {\n-    origin: ['https://app.example.com', 'https://admin.example.com'],\n+    origin: '*',\n     credentials: true,\n     methods: ['GET', 'POST', 'PUT', 'DELETE']\n   }\n ",
    "ground_truth": {
      "has_errors": true,
      "errors": [
        {
          "file_path": "config.js",
          "option_name": "cors.origin",
          "severity": "critical",
          "reason": "CORS origin set to '*' with credentials: true is invalid and insecure",
          "category": "security"
        }
      ]
    }
  }
]
